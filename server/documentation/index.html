<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home | Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 200px; height: 60px">
        
            <img src="./img/CEEO_Innovations_Logo_White.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Home</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Service_SystemLink.html">Service_SystemLink</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SystemLink_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SystemLink.html#~init">init</a></li><li><a href="Service_SystemLink.html#~executeAfterInit">executeAfterInit</a></li><li><a href="Service_SystemLink.html#~getTagsInfo">getTagsInfo</a></li><li><a href="Service_SystemLink.html#~setTagValue">setTagValue</a></li><li><a href="Service_SystemLink.html#~getTagValue">getTagValue</a></li><li><a href="Service_SystemLink.html#~isActive">isActive</a></li><li><a href="Service_SystemLink.html#~setAPIKey">setAPIKey</a></li><li><a href="Service_SystemLink.html#~createTag">createTag</a></li><li><a href="Service_SystemLink.html#~deleteTag">deleteTag</a></li></ul></div></li><li><a href="Service_SPIKE.html">Service_SPIKE</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.html#~init">init</a></li><li><a href="Service_SPIKE.html#~executeAfterInit">executeAfterInit</a></li><li><a href="Service_SPIKE.html#~executeWithStream">executeWithStream</a></li><li><a href="Service_SPIKE.html#~rebootHub">rebootHub</a></li><li><a href="Service_SPIKE.html#~getHubName">getHubName</a></li><li><a href="Service_SPIKE.html#~isActive">isActive</a></li><li><a href="Service_SPIKE.html#~getHubEvent">getHubEvent</a></li><li><a href="Service_SPIKE.html#~getHubGesture">getHubGesture</a></li><li><a href="Service_SPIKE.html#~getHubOrientation">getHubOrientation</a></li><li><a href="Service_SPIKE.html#~getMotorPorts">getMotorPorts</a></li><li><a href="Service_SPIKE.html#~getSmallMotorPorts">getSmallMotorPorts</a></li><li><a href="Service_SPIKE.html#~getBigMotorPorts">getBigMotorPorts</a></li><li><a href="Service_SPIKE.html#~getUltrasonicPorts">getUltrasonicPorts</a></li><li><a href="Service_SPIKE.html#~getColorPorts">getColorPorts</a></li><li><a href="Service_SPIKE.html#~getForcePorts">getForcePorts</a></li></ul></div></li><li><a href="Service_SPIKE.PrimeHub-left_button.html">left_button</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.PrimeHub~left_button_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.PrimeHub-left_button.html#.wait_until_pressed">wait_until_pressed</a></li><li><a href="Service_SPIKE.PrimeHub-left_button.html#.wait_until_released">wait_until_released</a></li><li><a href="Service_SPIKE.PrimeHub-left_button.html#.was_pressed">was_pressed</a></li><li><a href="Service_SPIKE.PrimeHub-left_button.html#.is_pressed">is_pressed</a></li></ul></div></li><li><a href="Service_SPIKE.PrimeHub-right_button.html">right_button</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.PrimeHub~right_button_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.PrimeHub-right_button.html#.wait_until_pressed">wait_until_pressed</a></li><li><a href="Service_SPIKE.PrimeHub-right_button.html#.wait_until_released">wait_until_released</a></li><li><a href="Service_SPIKE.PrimeHub-right_button.html#.was_pressed">was_pressed</a></li><li><a href="Service_SPIKE.PrimeHub-right_button.html#.is_pressed">is_pressed</a></li></ul></div></li><li><a href="Service_SPIKE.PrimeHub-light_matrix.html">light_matrix</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.PrimeHub~light_matrix_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.PrimeHub-light_matrix.html#.show_image">show_image</a></li><li><a href="Service_SPIKE.PrimeHub-light_matrix.html#.set_pixel">set_pixel</a></li><li><a href="Service_SPIKE.PrimeHub-light_matrix.html#.write">write</a></li><li><a href="Service_SPIKE.PrimeHub-light_matrix.html#.off">off</a></li></ul></div></li><li><a href="Service_SPIKE.PrimeHub-speaker.html">speaker</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.PrimeHub~speaker_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.PrimeHub-speaker.html#.beep">beep</a></li><li><a href="Service_SPIKE.PrimeHub-speaker.html#.start_beep">start_beep</a></li><li><a href="Service_SPIKE.PrimeHub-speaker.html#.stop">stop</a></li><li><a href="Service_SPIKE.PrimeHub-speaker.html#.get_volume">get_volume</a></li><li><a href="Service_SPIKE.PrimeHub-speaker.html#.set_volume">set_volume</a></li></ul></div></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html">motion_sensor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.PrimeHub~motion_sensor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.was_gesture">was_gesture</a></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.wait_for_new_gesture">wait_for_new_gesture</a></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.wait_for_new_orientation">wait_for_new_orientation</a></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.get_yaw_angle">get_yaw_angle</a></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.get_pitch_angle">get_pitch_angle</a></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.get_roll_angle">get_roll_angle</a></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.get_gesture">get_gesture</a></li><li><a href="Service_SPIKE.PrimeHub-motion_sensor.html#.get_orientation">get_orientation</a></li></ul></div></li><li><a href="Service_SPIKE.Motor.html">Motor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.Motor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.Motor.html#~get_speed">get_speed</a></li><li><a href="Service_SPIKE.Motor.html#~get_position">get_position</a></li><li><a href="Service_SPIKE.Motor.html#~get_degrees_counted">get_degrees_counted</a></li><li><a href="Service_SPIKE.Motor.html#~get_power">get_power</a></li><li><a href="Service_SPIKE.Motor.html#~get_default_speed">get_default_speed</a></li><li><a href="Service_SPIKE.Motor.html#~set_default_speed">set_default_speed</a></li><li><a href="Service_SPIKE.Motor.html#~set_stall_detection">set_stall_detection</a></li><li><a href="Service_SPIKE.Motor.html#~run_to_position">run_to_position</a></li><li><a href="Service_SPIKE.Motor.html#~start_at_power">start_at_power</a></li><li><a href="Service_SPIKE.Motor.html#~start">start</a></li><li><a href="Service_SPIKE.Motor.html#~run_for_seconds">run_for_seconds</a></li><li><a href="Service_SPIKE.Motor.html#~run_for_degrees">run_for_degrees</a></li><li><a href="Service_SPIKE.Motor.html#~stop">stop</a></li></ul></div></li><li><a href="Service_SPIKE.ColorSensor.html">ColorSensor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.ColorSensor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.ColorSensor.html#~get_color">get_color</a></li><li><a href="Service_SPIKE.ColorSensor.html#~get_ambient_light">get_ambient_light</a></li><li><a href="Service_SPIKE.ColorSensor.html#~get_reflected_light">get_reflected_light</a></li><li><a href="Service_SPIKE.ColorSensor.html#~get_rgb_intensity">get_rgb_intensity</a></li><li><a href="Service_SPIKE.ColorSensor.html#~get_red">get_red</a></li><li><a href="Service_SPIKE.ColorSensor.html#~get_green">get_green</a></li><li><a href="Service_SPIKE.ColorSensor.html#~get_blue">get_blue</a></li><li><a href="Service_SPIKE.ColorSensor.html#~wait_until_color">wait_until_color</a></li><li><a href="Service_SPIKE.ColorSensor.html#~wait_for_new_color">wait_for_new_color</a></li></ul></div></li><li><a href="Service_SPIKE.DistanceSensor.html">DistanceSensor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.DistanceSensor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.DistanceSensor.html#~get_distance_cm">get_distance_cm</a></li><li><a href="Service_SPIKE.DistanceSensor.html#~get_distance_inches">get_distance_inches</a></li><li><a href="Service_SPIKE.DistanceSensor.html#~get_distance_percentage">get_distance_percentage</a></li><li><a href="Service_SPIKE.DistanceSensor.html#~wait_for_distance_farther_than">wait_for_distance_farther_than</a></li><li><a href="Service_SPIKE.DistanceSensor.html#~wait_for_distance_closer_than">wait_for_distance_closer_than</a></li></ul></div></li><li><a href="Service_SPIKE.ForceSensor.html">ForceSensor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.ForceSensor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.ForceSensor.html#~is_pressed">is_pressed</a></li><li><a href="Service_SPIKE.ForceSensor.html#~get_force_newton">get_force_newton</a></li><li><a href="Service_SPIKE.ForceSensor.html#~get_force_percentage">get_force_percentage</a></li><li><a href="Service_SPIKE.ForceSensor.html#~wait_until_pressed">wait_until_pressed</a></li><li><a href="Service_SPIKE.ForceSensor.html#~wait_until_released">wait_until_released</a></li></ul></div></li><li><a href="Service_SPIKE.MotorPair.html">MotorPair</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Service_SPIKE.MotorPair_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Service_SPIKE.MotorPair.html#~set_motor_rotation">set_motor_rotation</a></li><li><a href="Service_SPIKE.MotorPair.html#~start_tank">start_tank</a></li><li><a href="Service_SPIKE.MotorPair.html#~start_tank_at_power">start_tank_at_power</a></li><li><a href="Service_SPIKE.MotorPair.html#~stop">stop</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    









    


    <section>
        <article class="readme"><h1>ServiceDock for SPIKE Prime</h1>
<blockquote>
<p>A frontend Javascript framework for building web interfaces that combine SPIKE Prime with third party services</p>
</blockquote>
<h2>Overview</h2>
<p>ServiceDock allows you to easily integrate your LEGO SPIKE Prime into interactive web pages.</p>
<p><img src="servicedockrealdemo.gif" alt="Demonstration"></p>
<h2>ServiceDock</h2>
<p>The following code creates the ServiceDock interface you see on the top left corner of the example above. This is all you need to use ServiceDock!</p>
<pre class="prettyprint source lang-html"><code>&lt;html>
    &lt;head>
        &lt;script src = &quot;./modules/ServiceDock.js&quot;>&lt;/script>
    &lt;/head>
    &lt;body>
        &lt;!-- this style must be kept for normal rendering-->
        &lt;div id = &quot;servicedock&quot; style = &quot;float:left;&quot;>
            &lt;!-- include the Services to use -->
            &lt;service-systemlink id = &quot;service_systemlink&quot;>&lt;/service-systemlink>
            &lt;service-spike id = &quot;service_spike&quot;>&lt;/service-spike>
        &lt;/div>
    &lt;/body>
</code></pre>
<h2>Services</h2>
<p>However, to be able to connect your Services (e.g. the SPIKE Prime Service), you will need to get its object from its corresponding ServiceDock HTML element. For example, <code> &lt;service-spike id = &quot;service_spike&quot;&gt;&lt;/service-spike&gt;</code> is the ServiceDock HTML element for the SPIKE Prime Service. To obtain the SPIKE Prime Service object, mySPIKE, you will need to do:</p>
<pre class="prettyprint source lang-javascript"><code>var mySPIKE = document.getElementbyId(&quot;service_spike&quot;).getService();
</code></pre>
<p>If you wanted to get the System Link cloud Service object, the process is exactly the same:</p>
<pre class="prettyprint source lang-javascript"><code>var mySL = document.getElementbyId(&quot;service_systemlink&quot;).getService();
</code></pre>
<h2>SPIKE Prime Service</h2>
<p>Let's just focus on SPIKE Prime for now. <code>mySPIKE</code> is your SPIKE Prime Service, which will get initialized when the user of your webpage clicks on the ServiceDock SPIKE button and connects their SPIKE Prime. To mess with their SPIKE Prime after they connect it to the browser, you will need to use <code> executeAfterInit(callback)</code>. The argument is a callback function, a fundamental way in Javascript for ensuring flow of execution. A callback function means that it will not execute until its parent function, <code>executeAfterInit</code>, has finished.</p>
<pre class="prettyprint source lang-javascript"><code>    mySPIKE.executeAfterInit(function () {
        mySPIKE.executeWithStream(getData);
    })
</code></pre>
<p>This tells the ServiceDock to execute <code>executeWithStream()</code> after the SPIKE Service was initialized. But what is <code>executeWithStream</code>?</p>
<p><code>executeWithStream</code> takes its own callback function and executes it forever...until the user disconnects their SPIKE Prime. This means that whatever code is inside the callback function, which in this case is <code>getData</code>, will be getting a live feed of sensor readings from the SPIKE Prime. This is how the image of the SPIKE Prime above was able to rotate only when the physical SPIKE Prime did.</p>
<p>Let's take a look at <code>getData</code></p>
<pre class="prettyprint source lang-javascript"><code>    async function getData() {
        // get the yaw degrees of rotation of the SPIKE Prime.
        var hubDeg = await hub.motion_sensor.get_yaw_angle();

        // get the orientation of the hub ( e.g. &quot;front&quot; or &quot;back&quot; )
        var hubOrientation = await mySPIKE.getHubOrientation();

        // when the SPIKE is facing down, show the sprite of its &quot;back&quot;, and hide the &quot;back&quot; sprite
        // else, when the SPIKE is facing up, show the sprite of its &quot;front&quot;, and hide the &quot;back&quot; sprite
        if (hubOrientation == &quot;back&quot;) {
            HTMLElement = document.getElementById(&quot;back&quot;);
            HTMLElement.style.display = &quot;block&quot;;

            spriteFront.style.display = &quot;none&quot;;
        } else if (hubOrientation == &quot;front&quot;) {
            HTMLElement = document.getElementById(&quot;front&quot;);
            HTMLElement.style.display = &quot;block&quot;;

            spriteBack.style.display = &quot;none&quot;;
        }

        // rotate the sprites the same number of degrees that the SPIKE rotates
        if (HTMLElement !== undefined) {
            HTMLElement.style.transform = &quot;rotate(&quot; + hubDeg + &quot;deg)&quot;;
        } else {
            spriteFront.style.transform = &quot;rotate(&quot; + hubDeg + &quot;deg)&quot;;
        }

    }
</code></pre>
<p><code>getData</code> function does two things.</p>
<ol>
<li>It displays on the web page whether the SPIKE is facing up or down</li>
<li>It rotates the displayed image of the SPIKE according to the SPIKE's yaw angle.</li>
</ol>
<p>You will see that there is a keyword called <code>async</code> before the definition of getData and <code>await</code> before the Service's getter functions. These two keywords are necessary in Javascript if you want to ensure that you get what you want, and not a &quot;promise&quot; that you will get it. A good rule of thumb is: whenever you need to use <code>await</code>, it needs to be enclosed inside an <code>async</code> function. You will always want to use <code>await</code> when you are using a getter function.</p>
<p>Oops. Some variables in getData weren't declared yet, such as hub, HTMLElement, spriteBack, and spriteFront. Don't worry. Here is the full javascript code.</p>
<pre class="prettyprint source lang-javascript"><code>window.onload = function () {
    var mySPIKE = document.getElementById(&quot;service_spike&quot;).getService();
    
    /* declare HTML elements */
    var spriteFront = document.getElementById(&quot;front&quot;);
    var spriteBack = document.getElementById(&quot;back&quot;);
    var HTMLElement;

    /* declare PrimeHub */
    var hub = mySPIKE.PrimeHub();

    mySPIKE.executeAfterInit(function () {
        mySPIKE.executeWithStream(getData);
    })

    async function getData() {

        var hubDeg = await hub.motion_sensor.get_yaw_angle();

        var hubOrientation = await mySPIKE.getHubOrientation();

        if (hubOrientation == &quot;back&quot;) {
            HTMLElement = document.getElementById(&quot;back&quot;);
            HTMLElement.style.display = &quot;block&quot;;

            spriteFront.style.display = &quot;none&quot;;
        } else if (hubOrientation == &quot;front&quot;) {
            HTMLElement = document.getElementById(&quot;front&quot;);
            HTMLElement.style.display = &quot;block&quot;;

            spriteBack.style.display = &quot;none&quot;;
        }

        if (HTMLElement !== undefined) {
            HTMLElement.style.transform = &quot;rotate(&quot; + hubDeg + &quot;deg)&quot;;
        } else {
            spriteFront.style.transform = &quot;rotate(&quot; + hubDeg + &quot;deg)&quot;;
        }

    }
}
</code></pre>
<p>That's it for the Javascript code! There's much more functions you can play around with, all of which you can check out in the API documentation to the left. But the webpage wouldn't be complete with more HTML and CSS!</p>
<p>If you would like to try out the example if your SPIKE Prime, click <a href="servicedock_hub.html">here!</a></p>
<pre class="prettyprint source lang-html"><code>&lt;html>
    &lt;head>
        &lt;script src = &quot;./modules/ServiceDock.js&quot;>&lt;/script>
    &lt;/head>
    &lt;body>
        &lt;!--ServiceDock-->
        &lt;div id=&quot;servicedock&quot; style=&quot;float:left;&quot;>
            &lt;service-spike id=&quot;service_spike&quot;>&lt;/service-spike>
        &lt;/div>
        &lt;!--the SPIKE image container-->
        &lt;div id =&quot;hub&quot;>
            &lt;!-- sprite of the SPIKE facing up-->
            &lt;div id = &quot;front&quot; style = &quot;display: block;&quot;>
                &lt;div id=&quot;mainButton&quot;>&lt;/div> &lt;!--the main button icon-->
            &lt;/div>
            &lt;!-- sprite of the SPIKE facing down-->
            &lt;div id = &quot;back&quot; style = &quot;display: none&quot;>&lt;/div>
        &lt;/div>
    &lt;/body>
    &lt;script>
        window.onload = function (){
            var mySPIKE = document.getElementById(&quot;service_spike&quot;).getService();
            
            var spriteFront = document.getElementById(&quot;front&quot;);
            var spriteBack = document.getElementById(&quot;back&quot;);
            var HTMLElement;

            var hub = mySPIKE.PrimeHub();

            mySPIKE.executeAfterInit(function () {
                mySPIKE.executeWithStream(getData);
            })

            async function getData() {

                var hubDeg = await hub.motion_sensor.get_yaw_angle();

                var hubOrientation = await mySPIKE.getHubOrientation();

                if (hubOrientation == &quot;back&quot;) {
                    HTMLElement = document.getElementById(&quot;back&quot;);
                    HTMLElement.style.display = &quot;block&quot;;

                    spriteFront.style.display = &quot;none&quot;;
                } else if (hubOrientation == &quot;front&quot;) {
                    HTMLElement = document.getElementById(&quot;front&quot;);
                    HTMLElement.style.display = &quot;block&quot;;

                    spriteBack.style.display = &quot;none&quot;;
                }

                if (HTMLElement !== undefined) {
                    HTMLElement.style.transform = &quot;rotate(&quot; + hubDeg + &quot;deg)&quot;;
                } else {
                    spriteFront.style.transform = &quot;rotate(&quot; + hubDeg + &quot;deg)&quot;;
                }

            }
        }
    &lt;/script>
    &lt;style>
        #front {
            left: 400px;
            top: 200px;
            position: absolute;
            background-color: rgb(231,233,232);
            height: 250px;
            width: 150px;
            transform: rotate(0deg);
        }

        #mainButton {
            position:relative; 
            height:37px; 
            width: 37px;
            left: 51px;
            top: 200px;
            background-color:whitesmoke; 
            border: solid; 
            border-radius:50%;
        }
        
        #back {
            left: 400px;
            top: 200px;
            position: absolute;
            background-color: rgb(252,208,0);
            height: 250px;
            width: 150px;
        }
    &lt;/style>
&lt;/html>

</code></pre></article>
    </section>






</div>

<footer>
    <img class="logo" src="./img/CEEO_Innovations_Logo_White.png" style="height= "30px" width = "100px" ">
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = 'package:undefined_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>